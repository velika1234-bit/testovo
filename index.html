<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VideoQuiz Ultimate - Professional Edition</title>

    <!-- Tailwind CDN (—Å–∞–º–æ –∑–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚Äì –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ—Ç–æ –µ –±–µ–∑–≤—Ä–µ–¥–Ω–æ) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- –õ–û–ö–ê–õ–ù–ò –ë–ò–ë–õ–ò–û–¢–ï–ö–ò (–≤–µ—á–µ –∫–∞—á–µ–Ω–∏ –≤ –ø–∞–ø–∫–∞ js/) -->
    
    <!-- Lucide –∏–∫–æ–Ω–∏ -->
    <script src="js/lucide.min.js"></script>

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞ Excel –∏ PDF -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.mini.min.js"></script>
    <script src="js/jspdf.umd.min.js"></script>
    <script src="js/jspdf.plugin.autotable.min.js"></script>

    <!-- YouTube IFrame API (–≥–ª–æ–±–∞–ª–Ω–æ) -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <!-- QR –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (–ª–æ–∫–∞–ª–µ–Ω) -->
    <script src="js/qrcode.min.js"></script>

    <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Å—Ç–∏–ª–æ–≤–µ -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-slate-50 min-h-screen">

    <!-- –õ–æ—É–¥—ä—Ä -->
    <div id="auth-loader" class="fixed inset-0 bg-white z-[999] flex flex-col items-center justify-center text-center p-6">
        <div class="w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"></div>
        <p class="mt-4 font-black text-slate-400 uppercase text-[10px] tracking-widest">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞...</p>
        <button onclick="document.getElementById('auth-loader').classList.add('hidden')" class="mt-8 text-[9px] uppercase font-bold text-slate-300 underline">–í–ª–µ–∑ —Ä—ä—á–Ω–æ</button>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞ —Å—ä–æ–±—â–µ–Ω–∏—è -->
    <div id="msg-container" class="fixed top-4 sm:top-8 left-1/2 -translate-x-1/2 z-[3000] w-full max-w-[280px] sm:max-w-sm px-4 pointer-events-none"></div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" class="max-w-7xl mx-auto p-3 sm:p-10">

        <!-- ========== –ï–ö–†–ê–ù–ò ========== -->

        <!-- Welcome Screen -->
        <div id="screen-welcome" class="py-4 sm:py-12 animate-pop">
            <header class="text-center mb-12 sm:mb-20">
                <h1 class="text-5xl sm:text-7xl md:text-9xl font-black mb-4 tracking-tighter text-slate-900 leading-none">VideoQuiz <span class="text-indigo-600">Pro</span></h1>
                <p class="text-slate-400 font-black uppercase tracking-[0.2em] text-[10px] sm:text-xs">Professional Cloud Edition</p>
            </header>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-10">
                <div class="bg-white p-8 rounded-[3rem] border shadow-sm flex flex-col gap-6 text-center">
                    <h2 class="text-2xl font-black text-indigo-600">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª–Ω–æ</h2>
                    <input type="text" id="ind-quiz-code" placeholder="–ö–æ–¥ –Ω–∞ —É—Ä–æ–∫" class="w-full p-4 bg-slate-50 rounded-2xl border-2 text-center font-bold outline-none">
                    <label for="ind-sop-mode" class="flex items-center justify-center gap-3 bg-indigo-50 border border-indigo-100 rounded-xl p-3 cursor-pointer">
                        <input type="checkbox" id="ind-sop-mode" class="w-5 h-5 accent-indigo-600">
                        <span class="text-xs font-black uppercase text-indigo-700">–°–û–ü —Ä–µ–∂–∏–º (–≥–ª–∞—Å–æ–≤ —á–µ—Ç–µ—Ü + –ø–æ-–µ–¥—ä—Ä —Ç–µ–∫—Å—Ç)</span>
                    </label>
                    <label for="ind-discussion-mode" class="flex items-center justify-center gap-3 bg-amber-50 border border-amber-200 rounded-xl p-3 cursor-pointer">
                        <input type="checkbox" id="ind-discussion-mode" class="w-5 h-5 accent-amber-600">
                        <span class="text-xs font-black uppercase text-amber-700">–†–µ–∂–∏–º –æ–±—Å—ä–∂–¥–∞–Ω–µ (–±–µ–∑ –∑–∞–ø–∏—Å –≤ –æ–±–ª–∞–∫–∞)</span>
                    </label>
                    <button onclick="window.startIndividual()" class="w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase shadow-xl hover:bg-indigo-700 transition-all text-xs shadow-indigo-200">–ó–∞–ø–æ—á–Ω–∏</button>
                </div>
                <div class="bg-white p-8 rounded-[3rem] border-2 border-emerald-500 shadow-2xl flex flex-col gap-6 text-center md:scale-105">
                    <h2 class="text-2xl font-black text-emerald-600">–í –ö–ª–∞—Å</h2>
                    <input type="text" id="live-student-name" placeholder="–¢–≤–æ–µ—Ç–æ –∏–º–µ" class="w-full p-4 bg-slate-50 rounded-2xl border-2 text-center font-bold outline-none">
                    <input type="text" id="live-pin" placeholder="PIN –∫–æ–¥" maxlength="4" inputmode="numeric" pattern="[0-9]*" class="w-full p-4 bg-slate-50 rounded-2xl border-2 text-center font-black text-2xl outline-none">
                    <button onclick="window.joinLiveSession()" class="w-full py-5 bg-emerald-500 text-white rounded-2xl font-black uppercase shadow-xl hover:bg-emerald-600 transition-all text-xs shadow-emerald-200">–í–ª–µ–∑ –≤ —Å–µ—Å–∏—è</button>
                </div>
                <div class="bg-slate-900 p-8 rounded-[3rem] shadow-2xl text-white flex flex-col gap-6 text-center">
                    <h2 class="text-2xl font-black text-indigo-400">–£—á–∏—Ç–µ–ª–∏</h2>
                    <p class="text-[10px] text-slate-400 uppercase font-black">–í—Ö–æ–¥ –∏ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</p>
                    <button onclick="window.switchScreen('teacher-auth')" class="mt-auto w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs">–í–ª–µ–∑ –≤ –ø–∞–Ω–µ–ª</button>
                </div>
            </div>
        </div>

        <!-- Teacher Dashboard -->
        <div id="screen-teacher-dashboard" class="hidden animate-pop space-y-8">
            <div class="flex flex-col md:flex-row items-center justify-between bg-white p-6 sm:p-10 rounded-[3.5rem] border shadow-sm gap-6">
                <h2 class="text-2xl sm:text-4xl font-black text-slate-900 leading-none">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</h2>
                <div class="flex flex-wrap gap-2 justify-center">
                    <button onclick="window.switchScreen('create')" class="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black uppercase text-[10px] shadow-lg shadow-indigo-100">+ –ù–æ–≤ –£—Ä–æ–∫</button>
                    <button onclick="window.openImportModal()" class="bg-emerald-500 text-white px-8 py-4 rounded-2xl font-black uppercase text-[10px] shadow-lg shadow-emerald-100">–ò–º–ø–æ—Ä—Ç —Å –∫–æ–¥</button>
                    <button onclick="window.handleLogout()" class="bg-slate-100 text-slate-500 px-8 py-4 rounded-2xl font-black uppercase text-[10px]">–ò–∑—Ö–æ–¥</button>
                    <button id="admin-panel-btn" onclick="window.openAdminPanel()" class="hidden bg-purple-700 text-white px-8 py-4 rounded-2xl font-black uppercase text-[10px] shadow-lg shadow-purple-200">üìä –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-4">
                    <h3 class="text-base font-black flex items-center gap-2 text-indigo-600 px-2"><i data-lucide="book-open"></i> –í–∞—à–∏—Ç–µ —É—Ä–æ—Ü–∏</h3>
                    <div id="my-quizzes-list" class="space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar"></div>
                </div>
                <div class="space-y-4">
                    <h3 class="text-base font-black flex items-center gap-2 text-indigo-600 px-2"><i data-lucide="users"></i> –†–µ–∑—É–ª—Ç–∞—Ç–∏</h3>
                    <div class="flex items-center justify-between gap-3 px-2">
                        <p id="solo-results-summary" class="text-[11px] text-slate-400 font-bold">–í—Å–µ –æ—â–µ –Ω—è–º–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ —Ç–æ–∑–∏ –ø—Ä–æ—Ñ–∏–ª.</p>
                        <button onclick="window.exportSoloResultsExcel()" class="shrink-0 bg-indigo-600 text-white px-3 py-2 rounded-xl font-black uppercase text-[10px] shadow hover:bg-indigo-700 transition-all">–ï–∫—Å–ø–æ—Ä—Ç Excel</button>
                    </div>
                    <div class="bg-white rounded-[2.5rem] border shadow-sm h-[450px] overflow-hidden flex flex-col">
                        <div class="overflow-y-auto flex-1 custom-scrollbar">
                            <table class="w-full text-left">
                                <thead class="sticky top-0 bg-slate-50 font-black text-[9px] uppercase text-slate-400 border-b">
                                    <tr>
                                        <th class="py-4 px-4">–£—á–µ–Ω–∏–∫</th>
                                        <th class="py-4 px-4">–£—Ä–æ–∫</th>
                                        <th class="py-4 px-4">–î–∞—Ç–∞/–ß–∞—Å</th>
                                        <th class="py-4 px-4 text-right">–¢–æ—á–∫–∏</th>
                                        <th class="py-4 px-4 text-center">–ò–∑—Ç—Ä–∏–π</th>
                                    </tr>
                                </thead>
                                <tbody id="solo-results-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-slate-100 p-4 rounded-2xl text-center">
                <p class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">–¢–µ–∫—É—â–æ ID (–í–∞—à–∏—è—Ç –ò–º–µ–π–ª/–ü—Ä–æ—Ñ–∏–ª): <span id="debug-uid" class="text-indigo-600 select-all">...</span></p>
            </div>
        </div>

        <!-- Teacher Auth Screen -->
        <div id="screen-teacher-auth" class="hidden py-10 animate-pop">
            <div class="max-w-md mx-auto bg-white p-10 rounded-[3rem] border shadow-2xl text-center space-y-6">
                <h2 class="text-2xl font-black" id="auth-title">–í—Ö–æ–¥ –∑–∞ –£—á–∏—Ç–µ–ª–∏</h2>

                <div class="space-y-4 text-left">
                    <div>
                        <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">–ò–º–µ–Ω–∞ (—Ç—Ä–∏ –∏–º–µ–Ω–∞)</label>
                        <input type="text" id="auth-name" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none text-sm">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">–ò–º–µ–π–ª</label>
                        <input type="email" id="auth-email" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none text-sm">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">–ü–∞—Ä–æ–ª–∞</label>
                        <input type="password" id="auth-password" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none text-sm">
                    </div>
                    <div id="auth-teacher-code-container" class="hidden">
                        <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">–°–µ–∫—Ä–µ—Ç–µ–Ω –ö–æ–¥ (—Å–∞–º–æ –∑–∞ —É—á–∏—Ç–µ–ª–∏)</label>
                        <input type="password" id="auth-teacher-code" placeholder="–ö–æ–¥..." class="w-full p-4 bg-indigo-50 border-2 border-indigo-100 rounded-2xl font-black text-center outline-none text-sm">
                    </div>
                </div>

                <button id="auth-submit-btn" onclick="window.handleAuthSubmit()" class="w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase shadow-xl hover:bg-indigo-700 transition-all text-sm">–í–ª–µ–∑</button>

                <p id="auth-toggle-text" class="text-xs text-slate-500" onclick="window.toggleAuthMode()">
                    –ù—è–º–∞—Ç–µ –∞–∫–∞—É–Ω—Ç? <span class="underline font-black cursor-pointer">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–π—Ç–µ —Å–µ</span>
                </p>

                <button onclick="window.switchScreen('welcome')" class="text-[10px] font-bold text-slate-400 uppercase mt-4">–ù–∞–∑–∞–¥</button>
            </div>
        </div>

        <!-- Creator View -->
        <div id="screen-create" class="hidden space-y-6 animate-pop">
            <div class="bg-white p-6 rounded-[3rem] border shadow-sm flex flex-col md:flex-row gap-4 items-center">
                <button onclick="window.switchScreen('teacher-dashboard')" class="p-5 bg-slate-50 rounded-2xl"><i data-lucide="arrow-left"></i></button>
                <input type="text" id="yt-url" placeholder="YouTube –ª–∏–Ω–∫..." class="flex-1 w-full p-5 bg-slate-50 rounded-2xl border-2 border-transparent focus:border-indigo-600 outline-none font-bold">
                <div class="flex gap-2 w-full sm:w-auto">
                    <button onclick="window.loadEditorVideo()" class="flex-1 sm:flex-none bg-slate-900 text-white px-8 py-5 rounded-2xl font-black uppercase text-xs">–ó–∞—Ä–µ–¥–∏</button>
                    <button onclick="window.saveQuizToLibrary()" class="flex-1 sm:flex-none bg-indigo-600 text-white px-8 py-5 rounded-2xl font-black uppercase shadow-xl text-xs">–ó–∞–ø–∞–∑–∏</button>
                </div>
            </div>
            <div id="editor-view" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-8">
                    <div id="editor-player-container" class="video-container border-4 border-white shadow-2xl"></div>
                    <div class="mt-6 bg-white p-8 rounded-[3.5rem] flex flex-col sm:flex-row justify-between items-center border shadow-sm gap-6">
                        <button onclick="window.addQuestion()" class="w-full sm:w-auto bg-indigo-600 text-white px-10 py-5 rounded-2xl font-black uppercase shadow-xl text-xs flex items-center justify-center gap-2">
                            <i data-lucide="plus-circle"></i> –î–æ–±–∞–≤–∏ –≤—ä–ø—Ä–æ—Å
                        </button>
                        <p class="text-[10px] font-black text-slate-400">–í—ä–ø—Ä–æ—Å–∏: <span id="question-count">0</span></p>
                    </div>
                </div>
                <div class="lg:col-span-4 space-y-6">
                    <div class="bg-white p-6 rounded-[3rem] border shadow-sm">
                        <h3 class="text-xs font-black mb-4 text-indigo-600">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —É—Ä–æ–∫–∞</h3>
                        <input type="text" id="quiz-title" placeholder="–ó–∞–≥–ª–∞–≤–∏–µ –Ω–∞ —É—Ä–æ–∫–∞" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none text-sm mb-3">
                        <textarea id="quiz-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ)" rows="3" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none text-sm"></textarea>
                    </div>
                    <div id="questions-panel" class="bg-white p-6 rounded-[3rem] border shadow-sm max-h-[500px] overflow-y-auto custom-scrollbar">
                        <h3 class="text-xs font-black mb-4 text-indigo-600">–°–ø–∏—Å—ä–∫ —Å –≤—ä–ø—Ä–æ—Å–∏</h3>
                        <div id="questions-list" class="space-y-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Host View -->
        <div id="screen-host" class="hidden animate-pop">
            <div class="bg-white p-6 rounded-[3rem] border shadow-sm mb-6 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-3">
                    <i data-lucide="radio" class="text-indigo-600 w-8 h-8"></i>
                    <span class="font-black text-indigo-600 text-sm">–°–ï–°–ò–Ø –ù–ê –ñ–ò–í–û: <span id="session-code-display" class="text-slate-900"></span></span>
                </div>
                <div class="flex gap-2">
                    <button onclick="window.quitHostSession()" class="bg-slate-100 text-slate-500 px-6 py-3 rounded-2xl font-black uppercase text-[10px]">–ü—Ä–∏–∫–ª—é—á–∏</button>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-8">
                    <div id="host-player-container" class="video-container border-4 border-white shadow-2xl"></div>
                    <div id="current-question-host" class="mt-6 bg-white p-8 rounded-[3.5rem] border shadow-sm">
                        <p class="text-slate-400 font-black text-[10px] mb-2">–¢–ï–ö–£–© –í–™–ü–†–û–°</p>
                        <p id="host-question-text" class="text-lg font-black text-slate-900">–ò–∑–±–µ—Ä–µ—Ç–µ –≤—ä–ø—Ä–æ—Å –æ—Ç —Å–ø–∏—Å—ä–∫–∞</p>
                    </div>
                </div>
                <div class="lg:col-span-4">
                    <div class="bg-white p-6 rounded-[3rem] border shadow-sm h-[600px] overflow-y-auto custom-scrollbar">
                        <h3 class="text-xs font-black mb-4 text-indigo-600 flex items-center gap-2"><i data-lucide="list"></i> –í—ä–ø—Ä–æ—Å–∏</h3>
                        <div id="host-questions-list" class="space-y-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Solve Screen -->
        <div id="screen-solve" class="hidden animate-pop">
            <div class="bg-white p-6 rounded-[3rem] border shadow-sm mb-6 flex justify-between items-center">
                <h2 id="solving-quiz-title" class="text-sm font-black text-indigo-600">–†–µ—à–∞–≤–∞–Ω–µ...</h2>
                <button onclick="window.quitSolving()" class="bg-slate-100 text-slate-500 px-6 py-3 rounded-2xl font-black uppercase text-[10px]">–ò–∑—Ö–æ–¥</button>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-8">
                    <div id="solve-player-container" class="video-container border-4 border-white shadow-2xl"></div>
                </div>
                <div class="lg:col-span-4">
                    <div class="bg-white p-6 rounded-[3rem] border shadow-sm h-[500px] overflow-y-auto custom-scrollbar">
                        <h3 class="text-xs font-black mb-4 text-indigo-600">–í—ä–ø—Ä–æ—Å–∏</h3>
                        <div id="solve-questions-list" class="space-y-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Join Live Screen -->
        <div id="screen-join-live" class="hidden animate-pop">
            <div class="max-w-md mx-auto bg-white p-10 rounded-[3rem] border shadow-2xl text-center space-y-6">
                <h2 class="text-2xl font-black text-emerald-600">–í–ª–∏–∑–∞–Ω–µ –≤ —Å–µ—Å–∏—è</h2>
                <input type="text" id="join-live-name" placeholder="–¢–≤–æ–µ—Ç–æ –∏–º–µ" class="w-full p-4 bg-slate-50 rounded-2xl border-2 text-center font-bold outline-none">
                <input type="text" id="join-live-code" placeholder="–ö–æ–¥ –Ω–∞ —Å–µ—Å–∏—è" class="w-full p-4 bg-slate-50 rounded-2xl border-2 text-center font-black text-2xl outline-none">
                <button onclick="window.submitJoinLive()" class="w-full py-5 bg-emerald-500 text-white rounded-2xl font-black uppercase shadow-xl hover:bg-emerald-600 transition-all text-sm">–í–ª–µ–∑</button>
                <button onclick="window.switchScreen('welcome')" class="text-[10px] font-bold text-slate-400 uppercase">–ù–∞–∑–∞–¥</button>
            </div>
        </div>

        <!-- Live Participant View -->
        <div id="screen-live-participant" class="hidden animate-pop">
            <div class="bg-white p-6 rounded-[3rem] border shadow-sm mb-6 flex justify-between items-center">
                <div>
                    <p class="text-[10px] text-slate-400 font-black">–í–ª—è–∑—ä–ª –∫–∞—Ç–æ</p>
                    <p id="live-participant-name-display" class="font-black text-indigo-600"></p>
                </div>
                <button onclick="window.leaveLiveSession()" class="bg-slate-100 text-slate-500 px-6 py-3 rounded-2xl font-black uppercase text-[10px]">–ù–∞–ø—É—Å–Ω–∏</button>
            </div>
            <div class="bg-white p-8 rounded-[3.5rem] border shadow-sm text-center">
                <p id="live-participant-status" class="text-slate-400 font-black text-sm">–°–≤—ä—Ä–∑–≤–∞–Ω–µ —Å—ä—Å —Å–µ—Å–∏—è—Ç–∞...</p>
                <div id="live-participant-question" class="mt-8 hidden">
                    <p id="live-participant-question-text" class="text-2xl font-black mb-8"></p>
                    <div id="live-participant-options" class="space-y-4 max-w-md mx-auto"></div>
                </div>
                <div id="live-participant-waiting" class="mt-8 hidden">
                    <p class="text-slate-300 font-black">–ß–∞–∫–∞–π—Ç–µ –¥–æ–º–∞–∫–∏–Ω—ä—Ç –¥–∞ –ø—É—Å–Ω–µ —Å–ª–µ–¥–≤–∞—â–∏—è –≤—ä–ø—Ä–æ—Å</p>
                </div>
            </div>
        </div>

        <!-- Modal: Rules Help -->
        <div id="modal-rules-help" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[2000] hidden items-center justify-center p-4">
            <div class="bg-white max-w-md w-full p-8 rounded-[3rem] shadow-2xl text-center space-y-6">
                <i data-lucide="alert-triangle" class="w-16 h-16 text-amber-500 mx-auto"></i>
                <h2 class="text-xl font-black text-slate-900">–ù–µ—â–æ —Å –¥–æ—Å—Ç—ä–ø–∞...</h2>
                <p class="text-sm text-slate-500">–ò–∑–≥–ª–µ–∂–¥–∞, —á–µ –Ω—è–º–∞—Ç–µ –Ω—É–∂–Ω–∏—Ç–µ –ø—Ä–∞–≤–∞ –∑–∞ Firestore. –ú–æ–∂–µ –¥–∞ —Å–µ –Ω–∞–ª–æ–∂–∏ –¥–∞ –≤–ª–µ–∑–µ—Ç–µ –∏–ª–∏ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.</p>
                <button onclick="document.getElementById('modal-rules-help').classList.add('hidden')" class="bg-indigo-600 text-white px-10 py-5 rounded-2xl font-black uppercase text-sm w-full">–ó–∞—Ç–≤–æ—Ä–∏</button>
            </div>
        </div>

        <!-- Modal: Import Quiz -->
        <div id="modal-import" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[2000] hidden items-center justify-center p-4">
            <div class="bg-white max-w-md w-full p-8 rounded-[3rem] shadow-2xl text-center space-y-6">
                <i data-lucide="download" class="w-16 h-16 text-indigo-600 mx-auto"></i>
                <h2 class="text-xl font-black text-slate-900">–ò–º–ø–æ—Ä—Ç —Å –∫–æ–¥</h2>
                <input type="text" id="import-code-input" placeholder="–ö–æ–¥ –Ω–∞ —É—Ä–æ–∫" class="w-full p-4 bg-slate-50 rounded-2xl border-2 text-center font-bold outline-none">
                <button onclick="window.importQuizByCode()" class="w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase shadow-xl hover:bg-indigo-700 transition-all text-sm">–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π</button>
                <button onclick="window.closeImportModal()" class="text-[10px] font-bold text-slate-400 uppercase">–ó–∞—Ç–≤–æ—Ä–∏</button>
            </div>
        </div>

        <!-- Modal: Question Edit -->
        <div id="modal-question" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[2000] hidden items-center justify-center p-4 overflow-y-auto">
            <div class="bg-white max-w-lg w-full p-8 rounded-[3rem] shadow-2xl space-y-6">
                <h2 class="text-xl font-black text-slate-900 text-center" id="modal-question-title">–ù–æ–≤ –≤—ä–ø—Ä–æ—Å</h2>
                <input type="text" id="question-text" placeholder="–¢–µ–∫—Å—Ç –Ω–∞ –≤—ä–ø—Ä–æ—Å–∞" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none">
                <input type="number" id="question-time" placeholder="–í—Ä–µ–º–µ –∑–∞ –æ—Ç–≥–æ–≤–æ—Ä (—Å–µ–∫—É–Ω–¥–∏)" value="30" min="5" class="w-full p-4 bg-slate-50 rounded-2xl border-2 font-bold outline-none">
                <div class="space-y-3">
                    <p class="text-xs font-black text-slate-400">–û–ø—Ü–∏–∏ (–ø–æ–Ω–µ –¥–≤–µ, –º–∞—Ä–∫–∏—Ä–∞–π –≤—è—Ä–Ω–∞—Ç–∞)</p>
                    <div id="options-container"></div>
                    <button onclick="window.addOptionField()" class="text-xs font-black text-indigo-600 uppercase">+ –î–æ–±–∞–≤–∏ –æ–ø—Ü–∏—è</button>
                </div>
                <div class="flex gap-3">
                    <button onclick="window.saveQuestion()" class="flex-1 py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-sm">–ó–∞–ø–∞–∑–∏</button>
                    <button onclick="window.closeQuestionModal()" class="flex-1 py-5 bg-slate-100 text-slate-500 rounded-2xl font-black uppercase text-sm">–û—Ç–∫–∞–∑</button>
                </div>
            </div>
        </div>

        <!-- Modal: Confirm Delete -->
        <div id="modal-confirm" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[2000] hidden items-center justify-center p-4">
            <div class="bg-white max-w-sm w-full p-8 rounded-[3rem] shadow-2xl text-center space-y-6">
                <i data-lucide="trash-2" class="w-16 h-16 text-rose-500 mx-auto"></i>
                <p id="confirm-message" class="text-sm font-black text-slate-900">–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ?</p>
                <div class="flex gap-3">
                    <button onclick="window.confirmAction()" class="flex-1 py-4 bg-rose-500 text-white rounded-2xl font-black uppercase text-xs">–î–∞</button>
                    <button onclick="window.closeConfirmModal()" class="flex-1 py-4 bg-slate-100 text-slate-500 rounded-2xl font-black uppercase text-xs">–ù–µ</button>
                </div>
            </div>
        </div>

        <!-- Modal: QR Code -->
        <div id="modal-qr" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[2000] hidden items-center justify-center p-4">
            <div class="bg-white max-w-sm w-full p-8 rounded-[3rem] shadow-2xl text-center space-y-6">
                <i data-lucide="qr-code" class="w-16 h-16 text-indigo-600 mx-auto"></i>
                <h2 class="text-xl font-black text-slate-900">QR –∫–æ–¥ –∑–∞ —Å–µ—Å–∏—è—Ç–∞</h2>
                <div id="qr-code-container" class="flex justify-center"></div>
                <p id="qr-session-pin" class="text-xs font-black text-slate-400">–ü–ò–ù: <span class="text-indigo-600"></span></p>
                <div class="flex gap-3">
                    <button onclick="window.downloadQRCode()" class="flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs">–ò–∑—Ç–µ–≥–ª–∏</button>
                    <button onclick="window.closeQRModal()" class="flex-1 py-4 bg-slate-100 text-slate-500 rounded-2xl font-black uppercase text-xs">–ó–∞—Ç–≤–æ—Ä–∏</button>
                </div>
            </div>
        </div>

        <!-- Modal: Participants -->
        <div id="modal-participants" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[2000] hidden items-center justify-center p-4 overflow-y-auto">
            <div class="bg-white max-w-2xl w-full p-8 rounded-[3rem] shadow-2xl space-y-6">
                <h2 class="text-xl font-black text-slate-900 text-center">–£—á–∞—Å—Ç–Ω–∏—Ü–∏ –≤ —Å–µ—Å–∏—è—Ç–∞</h2>
                <div id="participants-list" class="space-y-3 max-h-96 overflow-y-auto custom-scrollbar p-2"></div>
                <button onclick="window.closeParticipantsModal()" class="w-full py-5 bg-slate-100 text-slate-500 rounded-2xl font-black uppercase text-sm">–ó–∞—Ç–≤–æ—Ä–∏</button>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
